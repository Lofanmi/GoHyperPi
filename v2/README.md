# GoHyperPi v2 - 多维度CPU性能测试工具

GoHyperPi v2是一个用Go语言编写的多维度CPU性能测试工具，相比v1版本，它提供了更全面的性能测试维度和更详细的性能分析报告。

## 新特性

### 多维度测试
- **计算密集型测试**: 基于Pi计算的整数运算性能测试
- **内存性能测试**: 内存读写性能和缓存效率测试
- **并发性能测试**: Goroutine并发处理和通道通信测试
- **加密性能测试**: 哈希和加密算法性能测试
- **浮点性能测试**: 浮点运算和矩阵运算测试
- **压缩性能测试**: 压缩解压缩算法性能测试
- **算法性能测试**: 排序算法和字符串处理测试

### 增强功能
- 综合评分系统，提供硬件性能等级评定
- 详细的性能分析报告
- 多核效率和扩展性分析
- 支持按类别运行测试
- 报告导出功能
- 丰富的命令行选项

## 安装

```bash
go install github.com/Lofanmi/GoHyperPi/v2@latest
```

## 使用方法

### 基本使用

```bash
# 运行所有测试
./GoHyperPi

# 指定核心数和重复次数
./GoHyperPi -proc 8 -times 2

# 显示详细输出
./GoHyperPi -v

# 运行特定类别测试
./GoHyperPi -category "计算密集型"

# 将报告保存到文件
./GoHyperPi -output report.txt

# 不显示CPU信息
./GoHyperPi -cpu=false
```

### 命令行选项

- `-proc int`: 处理器核心数 (默认: 系统逻辑核心数)
- `-times int`: 每个核心的重复测试次数 (默认: 1)
- `-v`: 显示详细输出 (默认: false)
- `-cpu`: 显示CPU信息 (默认: true)
- `-category string`: 只运行指定类别的测试
- `-output string`: 将报告保存到指定文件

### 测试类别

- `计算密集型`: Pi计算等整数运算密集型任务
- `内存性能`: 内存读写和缓存性能
- `并发性能`: Goroutine并发和通道通信
- `加密性能`: 哈希和加密算法
- `浮点性能`: 浮点运算和数学函数
- `压缩性能`: 压缩解压缩算法
- `算法性能`: 排序和字符串处理算法

## 实际测试结果

### Apple M1 (macOS ARM64) 跑分
```bash
./GoHyperPi -times 1 -v
```

```
=== CPU 信息 ===
CPU 名称: Apple M1
物理核心: 8
每核心线程数: 1
逻辑核心: 8
CPU 系列: 458787763, 型号: 0, 厂商ID: VendorUnknown
CPU 特性: AESARM, ASIMDDP, ASIMDRDM, ATOMICS, CRC32, DCPOP, FCMA, FP, FPHP, GPA, JSCVT, LRCPC, PMULL, SHA1, SH...
缓存行大小: 128 字节
L1 数据缓存: 65536 字节
L1 指令缓存: 131072 字节
L2 缓存: 4194304 字节
CPU 频率: 0 Hz
操作系统: darwin arm64

详细测试结果:
  Bit Operations       | 计算密集型 (Compute)      | 得分: 1238325.97 | 单核: 1241814558.04 | 多核: 1238325972.53 | 倍数: 0.12
  Trigonometric Functions | 浮点性能 (Float)         | 得分: 13317.04 | 单核: 9425905.93 | 多核: 13317044.50 | 倍数: 0.18
  Integer Operations   | 计算密集型 (Compute)      | 得分: 384635.76 | 单核: 1335480106.87 | 多核: 384635762.85 | 倍数: 0.04
  Matrix Operations    | 浮点性能 (Float)         | 得分: 76397.27 | 单核:   333.20 | 多核:    76.40 | 倍数: 0.25
  Cryptography         | 加密性能 (Crypto)        | 得分:  7333.52 | 单核: 292684.62 | 多核: 73335.21 | 倍数: 0.19
  Sorting Algorithms   | 算法性能 (Algorithm)     | 得分:   576.04 | 单核: 2052405.82 | 多核: 576040.62 | 倍数: 0.24
  Binary Processing    | 算法性能 (Algorithm)     | 得分: 328109.04 | 单核: 2108405994.65 | 多核: 3281090.38 | 倍数: 0.00
  Floating Point       | 浮点性能 (Float)         | 得分:  6335.02 | 单核: 9793634.11 | 多核: 6335024.15 | 倍数: 0.10
  Hash Functions       | 加密性能 (Crypto)        | 得分:   397.01 | 单核: 287904.12 | 多核: 397014.12 | 倍数: 0.18
  Channel Communication | 并发性能 (Concurrency)   | 得分:   532.94 | 单核: 5859462.59 | 多核: 5329361.42 | 倍数: 0.15
  Advanced Cryptography | 加密性能 (Crypto)        | 得分:  1780.75 | 单核: 25178.43 | 多核: 17807.49 | 倍数: 0.33
  Sequential Memory    | 内存性能 (Memory)        | 得分:     5.34 | 单核:     0.12 | 多核:     0.53 | 倍数: 0.59
  Memory Access        | 内存性能 (Memory)        | 得分:     7.87 | 单核:     0.13 | 多核:     0.79 | 倍数: 0.78
  Compression          | 压缩性能 (Compression)   | 得分:    70.62 | 单核:   154.99 | 多核:   706.22 | 倍数: 0.64
  Gzip                 | 压缩性能 (Compression)   | 得分:    36.90 | 单核:    87.95 | 多核:   369.04 | 倍数: 0.60
  String Processing    | 算法性能 (Algorithm)     | 得分:   569.55 | 单核:  1227.80 | 多核:  5695.55 | 倍数: 0.62
  Pi Calculation       | 计算密集型 (Compute)      | 得分:    45.17 | 单核:  5740.39 | 多核: 45165.94 | 倍数: 0.98
  Concurrency Test     | 并发性能 (Concurrency)   | 得分:  5571.85 | 单核: 802472.24 | 多核: 5571846.97 | 倍数: 0.91

=== GoHyperPi v2 性能测试报告 ===

综合得分: 124917.87

分类得分:
  计算密集型       : 541002.30 (权重: 20%)
  内存性能        :     6.61 (权重: 15%)
  并发性能        :  3052.39 (权重: 15%)
  加密性能        :  3170.43 (权重: 15%)
  浮点性能        : 32016.45 (权重: 15%)
  压缩性能        :    53.76 (权重: 10%)
  算法性能        : 109751.54 (权重: 10%)

性能分析:
  平均多核倍数: 0.38

总测试时间: 54.927662042s
```

**Apple M1 性能特点:**
- ⚡ **计算密集型强**: 得分541002.30，位运算和整数运算表现突出
- 💻 **算法性能优异**: 得分109751.54，二进制处理高效
- 🔢 **浮点运算稳定**: 得分32016.45，包含三角函数和矩阵运算
- 🛡️ **加密性能良好**: 得分3170.43，支持多种加密算法
- 📊 **综合得分**: 124917.87

## 注意事项

- 综合得分受硬件配置、系统环境等多种因素影响
- 建议多次运行测试取平均值以获得更准确的结果
- 不同设备和平台的得分不具有直接可比性

## 技术特点

- 模块化设计，易于扩展新的测试项目
- 充分利用Go语言的并发特性
- 标准化的性能指标和评分系统
- 跨平台支持 (Windows, macOS, Linux)
- 低内存占用，高效的性能测试

## 与v1版本对比

| 特性 | v1版本 | v2版本 |
|------|--------|--------|
| 测试维度 | 1个 (Pi计算) | 13个 |
| 测试类别 | 1个 | 7个 |
| 评分系统 | 简单比例 | 综合加权评分 |
| 性能分析 | 基础 | 详细分析报告 |
| 报告导出 | 无 | 支持 |

## 系统要求

- Go 1.21+
- 内存: 至少100MB可用内存
- 操作系统: Windows, macOS, Linux

## 许可证

Apache License, Version 2.0

## 贡献

欢迎提交Issue和Pull Request来帮助改进这个项目！

## 更新日志

### v2.0.0
- 新增多维度性能测试
- 实现综合评分系统
- 添加详细的性能分析报告
- 增强命令行界面
- 优化性能测试算法
- 添加报告导出功能
